<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mrs.infrastructure.datasource.reservation.ReservationMapperExt">
    <select id="findByReservableRoom_ReservableRoomIdOrderByStartTimeAsc"
            parameterType="mrs.domain.model.reservation.ReservableRoomId"
            resultMap="mrs.infrastructure.datasource.ReservationMapper.BaseResultMap">
        SELECT r.reservation_id,
               r.end_time,
               r.start_time,
               r.reserved_date,
               r.room_id,
               r.user_Id
        FROM Reservation r
                 LEFT OUTER JOIN reservable_room rr
                                 ON r.reserved_date = rr.reserved_date AND r.room_id = rr.room_id
        WHERE rr.reserved_date = #{reservedDate}
          AND rr.room_id = #{roomId}
        ORDER BY r.start_time ASC
    </select>
</mapper>
